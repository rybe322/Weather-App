"use strict";
(self["webpackChunkweather_app"] = self["webpackChunkweather_app"] || []).push([["index"],{

/***/ 890:
/*!********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/style.css ***!
  \********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/sourceMaps.js */ 537);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ 645);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".hello {\n  color: red;\n}", "",{"version":3,"sources":["webpack://./src/styles/style.css"],"names":[],"mappings":"AAAA;EACE,UAAU;AACZ","sourcesContent":[".hello {\n  color: red;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 915:
/*!******************************!*\
  !*** ./src/styles/style.css ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ 379);
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ 795);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ 569);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ 565);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ 216);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ 589);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./style.css */ 890);

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ 256:
/*!*******************************!*\
  !*** ./src/apis/tomtomapi.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TomTomAPI": () => (/* binding */ TomTomAPI)
/* harmony export */ });
const TomTomAPI = (searchQuery) => {
  const API_KEY = "fcHahkaWpps5D8BvVWNrkXwb0ASMm9BT";
  const BASE_URL = "https://api.tomtom.com/search/2/search/";

  const makeUrl = () => {
    let URL = BASE_URL;
    URL += searchQuery.replaceAll(" ", "-");
    URL += ".json";
    URL += `?key=${API_KEY}`;
    return URL;
  };

  async function getData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json.results[0];
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }

  async function getJsonData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json;
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }

  return { getData, getJsonData };
};

/*
TO USE:

  TomTomAPI(searchQuery)
    .getJsonData()
    .then((r) => {
      console.log(r);
      console.log(JsonToLocationObject(r));
      let locationModel = LocationModel(JsonToLocationObject(r));
      console.log("location model: ", locationModel);
      WeatherAPI(locationModel)
        .getWeatherData()
        .then((r) => {
          console.log(WeatherModel(r));
        });
    });
    */


/***/ }),

/***/ 962:
/*!********************************!*\
  !*** ./src/apis/weatherapi.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WeatherAPI": () => (/* binding */ WeatherAPI)
/* harmony export */ });
/* harmony import */ var _models_weathermodel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/weathermodel */ 179);
/* harmony import */ var _models_locationmodel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/locationmodel */ 479);



const WeatherAPI = (locationModel) => {
  const API_KEY = "f3c32091bf8f9865219ac12748616ead";
  let BASE_URL = " https://api.openweathermap.org/data/2.5/weather?";

  /*
  TO USE:
  Pass in WeatherAPI a LocationModel object 
  
  let locationData = await GeocodingAPI(locationInformation).getLocationData();
  let locationModel = LocationModel(locationData);
  let weatherData = await WeatherAPI(locationModel).getWeatherData();
  let weatherModel = WeatherModel(weatherData);

  */

  const makeUrl = () => {
    // https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}
    let URL = BASE_URL;
    URL += `lat=${locationModel.lat}&lon=${locationModel.lon}&appid=${API_KEY}`;
    //console.log(URL);
    return URL;
  };
  // Returns an object with the location data.
  async function getWeatherData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json;
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }
  return { getWeatherData };
};


/***/ }),

/***/ 138:
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _models_weathermodel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models/weathermodel */ 179);
/* harmony import */ var _apis_weatherapi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apis/weatherapi */ 962);
/* harmony import */ var _models_locationmodel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models/locationmodel */ 479);
/* harmony import */ var _styles_style_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./styles/style.css */ 915);
/* harmony import */ var _apis_tomtomapi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./apis/tomtomapi */ 256);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ 486);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);









let form = document.createElement("form");
let searchLabel = document.createElement("label");
let searchInput = document.createElement("input");
let btn = document.createElement("button");
btn.type = "submit";
form.appendChild(searchLabel);
form.appendChild(searchInput);
form.appendChild(btn);
btn.textContent = "submit";
searchLabel.textContent = "Search";

document.body.appendChild(form);
/*
let parser = require("parse-address");
var parsed = parser.parseLocation(
  "1005 N Gravenstein Highway Sebastopol CA 95472"
);

searchInput.oninput = () => {
  let value = searchInput.value;
  console.log(value);
  let parser = require("parse-address");
  let parsedObject = parser.parseLocation(value);
  if (parsedObject.city && parsedObject.state) console.log(parsedObject);
};
*/

form.onsubmit = (e) => {
  e.preventDefault();
  const value = document.querySelector("input").value;
  /*
  TomTomAPI(value)
    .getData()
    .then((r) => {
      console.log(r);
      console.log(JsonToLocationObject(r));
      let locationModel = LocationModel(JsonToLocationObject(r));
      console.log("location model: ", locationModel);
      WeatherAPI(locationModel)
        .getWeatherData()
        .then((r) => {
          console.log(WeatherModel(r));
        });
    });
    */
  console.log(WeatherAndLocationModel(value));
};

const WeatherAndLocationModel = (searchQuery) => {
  async function makeLocationModel() {
    let locationData = await _apis_tomtomapi__WEBPACK_IMPORTED_MODULE_4__.TomTomAPI.getData(searchQuery);
    let locationModel = (0,_models_locationmodel__WEBPACK_IMPORTED_MODULE_2__.LocationModel)((0,_models_locationmodel__WEBPACK_IMPORTED_MODULE_2__.JsonToLocationObject)(locationData));
    return locationModel;
  }

  async function makeWeatherModel() {
    let weatherData = await (0,_apis_weatherapi__WEBPACK_IMPORTED_MODULE_1__.WeatherAPI)(makeLocationModel()).getWeatherData();
    return (0,_models_weathermodel__WEBPACK_IMPORTED_MODULE_0__.WeatherModel)(weatherData);
  }

  let locationModel = makeLocationModel();
  let weatherModel = makeWeatherModel();
  console.log(Promise.all(makeLocationModel(), makeWeatherModel()));
};

//tomtomsearchtest();

const WeatherDataDomElement = async (searchQuery) => {
  const locationData = await (0,_apis_tomtomapi__WEBPACK_IMPORTED_MODULE_4__.TomTomAPI)(searchQuery).getData();
  const locationModel = (0,_models_locationmodel__WEBPACK_IMPORTED_MODULE_2__.LocationModel)((0,_models_locationmodel__WEBPACK_IMPORTED_MODULE_2__.JsonToLocationObject)(locationData));

  const weatherData = await (0,_apis_weatherapi__WEBPACK_IMPORTED_MODULE_1__.WeatherAPI)(locationModel).getWeatherData();
  const weatherModel = (0,_models_weathermodel__WEBPACK_IMPORTED_MODULE_0__.WeatherModel)(weatherData);

  const MunicipalityDomElement = () => {
    const element = document.createElement("p");
    element.textContent = locationModel.municipality;
    element.classList.add("municipality-text");
    return element;
  };

  const CurrentTemperatureDomElement = () => {
    const element = document.createElement("p");
    element.textContent = weatherModel.curTemp;
    element.classList.add("current-temp-text");
    return element;
  };

  const HighLowTemperatureDomElement = () => {
    const container = document.createElement("div");
    container.classList.add("min-max-temp-container");

    const lowtemp = document.createElement("p");
    lowtemp.textContent = weatherModel.minTemp;

    const hightemp = document.createElement("p");
    hightemp.textContent = weatherModel.maxTemp;

    container.appendChild(lowtemp);
    container.appendChild(hightemp);
    return container;
  };

  const WeatherDescriptionDomElement = () => {
    const element = document.createElement("p");
    element.textContent = weatherModel.description;
    element.classList.add("decription-text");
    return element;
  };

  const MainBanner = () => {
    const mainBanner = document.createElement("div");
    mainBanner.id = "main-banner";
    mainBanner.appendChild(MunicipalityDomElement());
    mainBanner.appendChild(CurrentTemperatureDomElement());
    mainBanner.appendChild(HighLowTemperatureDomElement());
    mainBanner.appendChild(WeatherDescriptionDomElement());
    return mainBanner;
  };

  return { MainBanner };
};

console.log(WeatherDataDomElement("london").MainBanner());

console.log("hello");


/***/ }),

/***/ 479:
/*!*************************************!*\
  !*** ./src/models/locationmodel.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JsonToLocationObject": () => (/* binding */ JsonToLocationObject),
/* harmony export */   "LocationModel": () => (/* binding */ LocationModel)
/* harmony export */ });
const LocationModel = (locationJson) => {
  let lat = locationJson ? locationJson.lat : "";
  let lon = locationJson ? locationJson.lon : "";
  let municipality = locationJson ? locationJson.municipality : "";
  let country = locationJson ? locationJson.country : "";

  //console.log(latitude, longitude, cityName, country, state);
  return { lat, lon, municipality, country };
};
const JsonToLocationObject = (jsonData) => {
  console.log("JSONtOlocatin object jsondata: ", jsonData);
  let municipality = jsonData.address.municipality;
  let country = jsonData.address.country;
  let lat = jsonData.position.lat;
  let lon = jsonData.position.lon;

  return { municipality, country, lat, lon };
};


/***/ }),

/***/ 179:
/*!************************************!*\
  !*** ./src/models/weathermodel.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WeatherModel": () => (/* binding */ WeatherModel)
/* harmony export */ });
const WeatherModel = (weatherJson) => {
  let feelsLike = weatherJson ? weatherJson.main.feels_like : "";
  let humidity = weatherJson ? weatherJson.main.humidity : "";
  let pressure = weatherJson ? weatherJson.main.pressure : "";
  let curTemp = weatherJson ? weatherJson.main.temp : "";
  let minTemp = weatherJson ? weatherJson.main.temp_min : "";
  let maxTemp = weatherJson ? weatherJson.main.temp_max : "";
  let windSpeed = weatherJson ? weatherJson.wind.speed : "";
  let description = weatherJson ? weatherJson.weather[0].description : "";

  return {
    feelsLike, // this is in kelvin
    humidity,
    pressure,
    curTemp,
    minTemp,
    maxTemp,
    windSpeed,
    description,
  };
};


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__(138)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2E1ODVkYWViY2Q4MTMxZTg5OTcuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDNkc7QUFDakI7QUFDNUYsOEJBQThCLG1GQUEyQixDQUFDLDRGQUFxQztBQUMvRjtBQUNBLGtEQUFrRCxlQUFlLEdBQUcsT0FBTyx1RkFBdUYsVUFBVSxpQ0FBaUMsZUFBZSxHQUFHLG1CQUFtQjtBQUNsUDtBQUNBLGlFQUFlLHVCQUF1QixFQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ052QyxNQUFrRztBQUNsRyxNQUF3RjtBQUN4RixNQUErRjtBQUMvRixNQUFrSDtBQUNsSCxNQUEyRztBQUMzRyxNQUEyRztBQUMzRyxNQUFzRztBQUN0RztBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhOztBQUVyQyx1QkFBdUIsdUdBQWE7QUFDcEM7QUFDQSxpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLHNGQUFPOzs7O0FBSWdEO0FBQ3hFLE9BQU8saUVBQWUsc0ZBQU8sSUFBSSw2RkFBYyxHQUFHLDZGQUFjLFlBQVksRUFBQzs7Ozs7Ozs7Ozs7Ozs7O0FDMUJ0RTtBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUEsV0FBVztBQUNYOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkRzRDtBQUNFOztBQUVqRDtBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDREQUE0RCxJQUFJLE1BQU0sSUFBSSxRQUFRO0FBQ2xGO0FBQ0Esa0JBQWtCLGtCQUFrQixPQUFPLGtCQUFrQixTQUFTLFFBQVE7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwQ3FEO0FBQ0Y7QUFDSjtBQUNRO0FBQ087QUFDbEM7QUFDaUI7QUFDYjs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCQUE2Qiw4REFBaUI7QUFDOUMsd0JBQXdCLG9FQUFhLENBQUMsMkVBQW9CO0FBQzFEO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsNERBQVU7QUFDdEMsV0FBVyxrRUFBWTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDZCQUE2QiwwREFBUztBQUN0Qyx3QkFBd0Isb0VBQWEsQ0FBQywyRUFBb0I7O0FBRTFELDRCQUE0Qiw0REFBVTtBQUN0Qyx1QkFBdUIsa0VBQVk7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWDs7QUFFQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQ3RJTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVztBQUNYO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVc7QUFDWDs7Ozs7Ozs7Ozs7Ozs7O0FDakJPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvc3R5bGVzL3N0eWxlLmNzcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zdHlsZXMvc3R5bGUuY3NzP2ZmOTQiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvYXBpcy90b210b21hcGkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvYXBpcy93ZWF0aGVyYXBpLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL21vZGVscy9sb2NhdGlvbm1vZGVsLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL21vZGVscy93ZWF0aGVybW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIuaGVsbG8ge1xcbiAgY29sb3I6IHJlZDtcXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3N0eWxlcy9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxVQUFVO0FBQ1pcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLmhlbGxvIHtcXG4gIGNvbG9yOiByZWQ7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJleHBvcnQgY29uc3QgVG9tVG9tQVBJID0gKHNlYXJjaFF1ZXJ5KSA9PiB7XG4gIGNvbnN0IEFQSV9LRVkgPSBcImZjSGFoa2FXcHBzNUQ4QnZWV05ya1h3YjBBU01tOUJUXCI7XG4gIGNvbnN0IEJBU0VfVVJMID0gXCJodHRwczovL2FwaS50b210b20uY29tL3NlYXJjaC8yL3NlYXJjaC9cIjtcblxuICBjb25zdCBtYWtlVXJsID0gKCkgPT4ge1xuICAgIGxldCBVUkwgPSBCQVNFX1VSTDtcbiAgICBVUkwgKz0gc2VhcmNoUXVlcnkucmVwbGFjZUFsbChcIiBcIiwgXCItXCIpO1xuICAgIFVSTCArPSBcIi5qc29uXCI7XG4gICAgVVJMICs9IGA/a2V5PSR7QVBJX0tFWX1gO1xuICAgIHJldHVybiBVUkw7XG4gIH07XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gobWFrZVVybCgpLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xuICAgICAgbGV0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4ganNvbi5yZXN1bHRzWzBdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0TG9jYXRpb25EYXRhOiBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEpzb25EYXRhKCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChtYWtlVXJsKCksIHsgbW9kZTogXCJjb3JzXCIgfSk7XG4gICAgICBsZXQganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBqc29uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0TG9jYXRpb25EYXRhOiBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IGdldERhdGEsIGdldEpzb25EYXRhIH07XG59O1xuXG4vKlxuVE8gVVNFOlxuXG4gIFRvbVRvbUFQSShzZWFyY2hRdWVyeSlcbiAgICAuZ2V0SnNvbkRhdGEoKVxuICAgIC50aGVuKChyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyKTtcbiAgICAgIGNvbnNvbGUubG9nKEpzb25Ub0xvY2F0aW9uT2JqZWN0KHIpKTtcbiAgICAgIGxldCBsb2NhdGlvbk1vZGVsID0gTG9jYXRpb25Nb2RlbChKc29uVG9Mb2NhdGlvbk9iamVjdChyKSk7XG4gICAgICBjb25zb2xlLmxvZyhcImxvY2F0aW9uIG1vZGVsOiBcIiwgbG9jYXRpb25Nb2RlbCk7XG4gICAgICBXZWF0aGVyQVBJKGxvY2F0aW9uTW9kZWwpXG4gICAgICAgIC5nZXRXZWF0aGVyRGF0YSgpXG4gICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coV2VhdGhlck1vZGVsKHIpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgKi9cbiIsImltcG9ydCB7IFdlYXRoZXJNb2RlbCB9IGZyb20gXCIuLi9tb2RlbHMvd2VhdGhlcm1vZGVsXCI7XG5pbXBvcnQgeyBMb2NhdGlvbk1vZGVsIH0gZnJvbSBcIi4uL21vZGVscy9sb2NhdGlvbm1vZGVsXCI7XG5cbmV4cG9ydCBjb25zdCBXZWF0aGVyQVBJID0gKGxvY2F0aW9uTW9kZWwpID0+IHtcbiAgY29uc3QgQVBJX0tFWSA9IFwiZjNjMzIwOTFiZjhmOTg2NTIxOWFjMTI3NDg2MTZlYWRcIjtcbiAgbGV0IEJBU0VfVVJMID0gXCIgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/XCI7XG5cbiAgLypcbiAgVE8gVVNFOlxuICBQYXNzIGluIFdlYXRoZXJBUEkgYSBMb2NhdGlvbk1vZGVsIG9iamVjdCBcbiAgXG4gIGxldCBsb2NhdGlvbkRhdGEgPSBhd2FpdCBHZW9jb2RpbmdBUEkobG9jYXRpb25JbmZvcm1hdGlvbikuZ2V0TG9jYXRpb25EYXRhKCk7XG4gIGxldCBsb2NhdGlvbk1vZGVsID0gTG9jYXRpb25Nb2RlbChsb2NhdGlvbkRhdGEpO1xuICBsZXQgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyQVBJKGxvY2F0aW9uTW9kZWwpLmdldFdlYXRoZXJEYXRhKCk7XG4gIGxldCB3ZWF0aGVyTW9kZWwgPSBXZWF0aGVyTW9kZWwod2VhdGhlckRhdGEpO1xuXG4gICovXG5cbiAgY29uc3QgbWFrZVVybCA9ICgpID0+IHtcbiAgICAvLyBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9sYXQ9e2xhdH0mbG9uPXtsb259JmFwcGlkPXtBUEkga2V5fVxuICAgIGxldCBVUkwgPSBCQVNFX1VSTDtcbiAgICBVUkwgKz0gYGxhdD0ke2xvY2F0aW9uTW9kZWwubGF0fSZsb249JHtsb2NhdGlvbk1vZGVsLmxvbn0mYXBwaWQ9JHtBUElfS0VZfWA7XG4gICAgLy9jb25zb2xlLmxvZyhVUkwpO1xuICAgIHJldHVybiBVUkw7XG4gIH07XG4gIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggdGhlIGxvY2F0aW9uIGRhdGEuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFdlYXRoZXJEYXRhKCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChtYWtlVXJsKCksIHsgbW9kZTogXCJjb3JzXCIgfSk7XG4gICAgICBsZXQganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBqc29uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0TG9jYXRpb25EYXRhOiBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4geyBnZXRXZWF0aGVyRGF0YSB9O1xufTtcbiIsImltcG9ydCB7IFdlYXRoZXJNb2RlbCB9IGZyb20gXCIuL21vZGVscy93ZWF0aGVybW9kZWxcIjtcbmltcG9ydCB7IHdlYXRoZXJBUEl0ZXN0IH0gZnJvbSBcIi4vYXBpcy93ZWF0aGVyYXBpXCI7XG5pbXBvcnQgeyBXZWF0aGVyQVBJIH0gZnJvbSBcIi4vYXBpcy93ZWF0aGVyYXBpXCI7XG5pbXBvcnQgeyBMb2NhdGlvbk1vZGVsIH0gZnJvbSBcIi4vbW9kZWxzL2xvY2F0aW9ubW9kZWxcIjtcbmltcG9ydCB7IEpzb25Ub0xvY2F0aW9uT2JqZWN0IH0gZnJvbSBcIi4vbW9kZWxzL2xvY2F0aW9ubW9kZWxcIjtcbmltcG9ydCBcIi4vc3R5bGVzL3N0eWxlLmNzc1wiO1xuaW1wb3J0IHsgVG9tVG9tQVBJIH0gZnJvbSBcIi4vYXBpcy90b210b21hcGlcIjtcbmltcG9ydCB7IGRpdmlkZSB9IGZyb20gXCJsb2Rhc2hcIjtcblxubGV0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbmxldCBzZWFyY2hMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbmxldCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbmxldCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuYnRuLnR5cGUgPSBcInN1Ym1pdFwiO1xuZm9ybS5hcHBlbmRDaGlsZChzZWFyY2hMYWJlbCk7XG5mb3JtLmFwcGVuZENoaWxkKHNlYXJjaElucHV0KTtcbmZvcm0uYXBwZW5kQ2hpbGQoYnRuKTtcbmJ0bi50ZXh0Q29udGVudCA9IFwic3VibWl0XCI7XG5zZWFyY2hMYWJlbC50ZXh0Q29udGVudCA9IFwiU2VhcmNoXCI7XG5cbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG4vKlxubGV0IHBhcnNlciA9IHJlcXVpcmUoXCJwYXJzZS1hZGRyZXNzXCIpO1xudmFyIHBhcnNlZCA9IHBhcnNlci5wYXJzZUxvY2F0aW9uKFxuICBcIjEwMDUgTiBHcmF2ZW5zdGVpbiBIaWdod2F5IFNlYmFzdG9wb2wgQ0EgOTU0NzJcIlxuKTtcblxuc2VhcmNoSW5wdXQub25pbnB1dCA9ICgpID0+IHtcbiAgbGV0IHZhbHVlID0gc2VhcmNoSW5wdXQudmFsdWU7XG4gIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgbGV0IHBhcnNlciA9IHJlcXVpcmUoXCJwYXJzZS1hZGRyZXNzXCIpO1xuICBsZXQgcGFyc2VkT2JqZWN0ID0gcGFyc2VyLnBhcnNlTG9jYXRpb24odmFsdWUpO1xuICBpZiAocGFyc2VkT2JqZWN0LmNpdHkgJiYgcGFyc2VkT2JqZWN0LnN0YXRlKSBjb25zb2xlLmxvZyhwYXJzZWRPYmplY3QpO1xufTtcbiovXG5cbmZvcm0ub25zdWJtaXQgPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLnZhbHVlO1xuICAvKlxuICBUb21Ub21BUEkodmFsdWUpXG4gICAgLmdldERhdGEoKVxuICAgIC50aGVuKChyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhyKTtcbiAgICAgIGNvbnNvbGUubG9nKEpzb25Ub0xvY2F0aW9uT2JqZWN0KHIpKTtcbiAgICAgIGxldCBsb2NhdGlvbk1vZGVsID0gTG9jYXRpb25Nb2RlbChKc29uVG9Mb2NhdGlvbk9iamVjdChyKSk7XG4gICAgICBjb25zb2xlLmxvZyhcImxvY2F0aW9uIG1vZGVsOiBcIiwgbG9jYXRpb25Nb2RlbCk7XG4gICAgICBXZWF0aGVyQVBJKGxvY2F0aW9uTW9kZWwpXG4gICAgICAgIC5nZXRXZWF0aGVyRGF0YSgpXG4gICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coV2VhdGhlck1vZGVsKHIpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgKi9cbiAgY29uc29sZS5sb2coV2VhdGhlckFuZExvY2F0aW9uTW9kZWwodmFsdWUpKTtcbn07XG5cbmNvbnN0IFdlYXRoZXJBbmRMb2NhdGlvbk1vZGVsID0gKHNlYXJjaFF1ZXJ5KSA9PiB7XG4gIGFzeW5jIGZ1bmN0aW9uIG1ha2VMb2NhdGlvbk1vZGVsKCkge1xuICAgIGxldCBsb2NhdGlvbkRhdGEgPSBhd2FpdCBUb21Ub21BUEkuZ2V0RGF0YShzZWFyY2hRdWVyeSk7XG4gICAgbGV0IGxvY2F0aW9uTW9kZWwgPSBMb2NhdGlvbk1vZGVsKEpzb25Ub0xvY2F0aW9uT2JqZWN0KGxvY2F0aW9uRGF0YSkpO1xuICAgIHJldHVybiBsb2NhdGlvbk1vZGVsO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gbWFrZVdlYXRoZXJNb2RlbCgpIHtcbiAgICBsZXQgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyQVBJKG1ha2VMb2NhdGlvbk1vZGVsKCkpLmdldFdlYXRoZXJEYXRhKCk7XG4gICAgcmV0dXJuIFdlYXRoZXJNb2RlbCh3ZWF0aGVyRGF0YSk7XG4gIH1cblxuICBsZXQgbG9jYXRpb25Nb2RlbCA9IG1ha2VMb2NhdGlvbk1vZGVsKCk7XG4gIGxldCB3ZWF0aGVyTW9kZWwgPSBtYWtlV2VhdGhlck1vZGVsKCk7XG4gIGNvbnNvbGUubG9nKFByb21pc2UuYWxsKG1ha2VMb2NhdGlvbk1vZGVsKCksIG1ha2VXZWF0aGVyTW9kZWwoKSkpO1xufTtcblxuLy90b210b21zZWFyY2h0ZXN0KCk7XG5cbmNvbnN0IFdlYXRoZXJEYXRhRG9tRWxlbWVudCA9IGFzeW5jIChzZWFyY2hRdWVyeSkgPT4ge1xuICBjb25zdCBsb2NhdGlvbkRhdGEgPSBhd2FpdCBUb21Ub21BUEkoc2VhcmNoUXVlcnkpLmdldERhdGEoKTtcbiAgY29uc3QgbG9jYXRpb25Nb2RlbCA9IExvY2F0aW9uTW9kZWwoSnNvblRvTG9jYXRpb25PYmplY3QobG9jYXRpb25EYXRhKSk7XG5cbiAgY29uc3Qgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyQVBJKGxvY2F0aW9uTW9kZWwpLmdldFdlYXRoZXJEYXRhKCk7XG4gIGNvbnN0IHdlYXRoZXJNb2RlbCA9IFdlYXRoZXJNb2RlbCh3ZWF0aGVyRGF0YSk7XG5cbiAgY29uc3QgTXVuaWNpcGFsaXR5RG9tRWxlbWVudCA9ICgpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGxvY2F0aW9uTW9kZWwubXVuaWNpcGFsaXR5O1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm11bmljaXBhbGl0eS10ZXh0XCIpO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9O1xuXG4gIGNvbnN0IEN1cnJlbnRUZW1wZXJhdHVyZURvbUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB3ZWF0aGVyTW9kZWwuY3VyVGVtcDtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50LXRlbXAtdGV4dFwiKTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfTtcblxuICBjb25zdCBIaWdoTG93VGVtcGVyYXR1cmVEb21FbGVtZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtaW4tbWF4LXRlbXAtY29udGFpbmVyXCIpO1xuXG4gICAgY29uc3QgbG93dGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGxvd3RlbXAudGV4dENvbnRlbnQgPSB3ZWF0aGVyTW9kZWwubWluVGVtcDtcblxuICAgIGNvbnN0IGhpZ2h0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgaGlnaHRlbXAudGV4dENvbnRlbnQgPSB3ZWF0aGVyTW9kZWwubWF4VGVtcDtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsb3d0ZW1wKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaGlnaHRlbXApO1xuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG5cbiAgY29uc3QgV2VhdGhlckRlc2NyaXB0aW9uRG9tRWxlbWVudCA9ICgpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHdlYXRoZXJNb2RlbC5kZXNjcmlwdGlvbjtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkZWNyaXB0aW9uLXRleHRcIik7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH07XG5cbiAgY29uc3QgTWFpbkJhbm5lciA9ICgpID0+IHtcbiAgICBjb25zdCBtYWluQmFubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtYWluQmFubmVyLmlkID0gXCJtYWluLWJhbm5lclwiO1xuICAgIG1haW5CYW5uZXIuYXBwZW5kQ2hpbGQoTXVuaWNpcGFsaXR5RG9tRWxlbWVudCgpKTtcbiAgICBtYWluQmFubmVyLmFwcGVuZENoaWxkKEN1cnJlbnRUZW1wZXJhdHVyZURvbUVsZW1lbnQoKSk7XG4gICAgbWFpbkJhbm5lci5hcHBlbmRDaGlsZChIaWdoTG93VGVtcGVyYXR1cmVEb21FbGVtZW50KCkpO1xuICAgIG1haW5CYW5uZXIuYXBwZW5kQ2hpbGQoV2VhdGhlckRlc2NyaXB0aW9uRG9tRWxlbWVudCgpKTtcbiAgICByZXR1cm4gbWFpbkJhbm5lcjtcbiAgfTtcblxuICByZXR1cm4geyBNYWluQmFubmVyIH07XG59O1xuXG5jb25zb2xlLmxvZyhXZWF0aGVyRGF0YURvbUVsZW1lbnQoXCJsb25kb25cIikuTWFpbkJhbm5lcigpKTtcblxuY29uc29sZS5sb2coXCJoZWxsb1wiKTtcbiIsImV4cG9ydCBjb25zdCBMb2NhdGlvbk1vZGVsID0gKGxvY2F0aW9uSnNvbikgPT4ge1xuICBsZXQgbGF0ID0gbG9jYXRpb25Kc29uID8gbG9jYXRpb25Kc29uLmxhdCA6IFwiXCI7XG4gIGxldCBsb24gPSBsb2NhdGlvbkpzb24gPyBsb2NhdGlvbkpzb24ubG9uIDogXCJcIjtcbiAgbGV0IG11bmljaXBhbGl0eSA9IGxvY2F0aW9uSnNvbiA/IGxvY2F0aW9uSnNvbi5tdW5pY2lwYWxpdHkgOiBcIlwiO1xuICBsZXQgY291bnRyeSA9IGxvY2F0aW9uSnNvbiA/IGxvY2F0aW9uSnNvbi5jb3VudHJ5IDogXCJcIjtcblxuICAvL2NvbnNvbGUubG9nKGxhdGl0dWRlLCBsb25naXR1ZGUsIGNpdHlOYW1lLCBjb3VudHJ5LCBzdGF0ZSk7XG4gIHJldHVybiB7IGxhdCwgbG9uLCBtdW5pY2lwYWxpdHksIGNvdW50cnkgfTtcbn07XG5leHBvcnQgY29uc3QgSnNvblRvTG9jYXRpb25PYmplY3QgPSAoanNvbkRhdGEpID0+IHtcbiAgY29uc29sZS5sb2coXCJKU09OdE9sb2NhdGluIG9iamVjdCBqc29uZGF0YTogXCIsIGpzb25EYXRhKTtcbiAgbGV0IG11bmljaXBhbGl0eSA9IGpzb25EYXRhLmFkZHJlc3MubXVuaWNpcGFsaXR5O1xuICBsZXQgY291bnRyeSA9IGpzb25EYXRhLmFkZHJlc3MuY291bnRyeTtcbiAgbGV0IGxhdCA9IGpzb25EYXRhLnBvc2l0aW9uLmxhdDtcbiAgbGV0IGxvbiA9IGpzb25EYXRhLnBvc2l0aW9uLmxvbjtcblxuICByZXR1cm4geyBtdW5pY2lwYWxpdHksIGNvdW50cnksIGxhdCwgbG9uIH07XG59O1xuIiwiZXhwb3J0IGNvbnN0IFdlYXRoZXJNb2RlbCA9ICh3ZWF0aGVySnNvbikgPT4ge1xuICBsZXQgZmVlbHNMaWtlID0gd2VhdGhlckpzb24gPyB3ZWF0aGVySnNvbi5tYWluLmZlZWxzX2xpa2UgOiBcIlwiO1xuICBsZXQgaHVtaWRpdHkgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLm1haW4uaHVtaWRpdHkgOiBcIlwiO1xuICBsZXQgcHJlc3N1cmUgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLm1haW4ucHJlc3N1cmUgOiBcIlwiO1xuICBsZXQgY3VyVGVtcCA9IHdlYXRoZXJKc29uID8gd2VhdGhlckpzb24ubWFpbi50ZW1wIDogXCJcIjtcbiAgbGV0IG1pblRlbXAgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLm1haW4udGVtcF9taW4gOiBcIlwiO1xuICBsZXQgbWF4VGVtcCA9IHdlYXRoZXJKc29uID8gd2VhdGhlckpzb24ubWFpbi50ZW1wX21heCA6IFwiXCI7XG4gIGxldCB3aW5kU3BlZWQgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLndpbmQuc3BlZWQgOiBcIlwiO1xuICBsZXQgZGVzY3JpcHRpb24gPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLndlYXRoZXJbMF0uZGVzY3JpcHRpb24gOiBcIlwiO1xuXG4gIHJldHVybiB7XG4gICAgZmVlbHNMaWtlLCAvLyB0aGlzIGlzIGluIGtlbHZpblxuICAgIGh1bWlkaXR5LFxuICAgIHByZXNzdXJlLFxuICAgIGN1clRlbXAsXG4gICAgbWluVGVtcCxcbiAgICBtYXhUZW1wLFxuICAgIHdpbmRTcGVlZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=