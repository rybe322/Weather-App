"use strict";
(self["webpackChunkweather_app"] = self["webpackChunkweather_app"] || []).push([["index"],{

/***/ 890:
/*!********************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/styles/style.css ***!
  \********************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/sourceMaps.js */ 537);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ 645);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".hello {\n  color: red;\n}", "",{"version":3,"sources":["webpack://./src/styles/style.css"],"names":[],"mappings":"AAAA;EACE,UAAU;AACZ","sourcesContent":[".hello {\n  color: red;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 915:
/*!******************************!*\
  !*** ./src/styles/style.css ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ 379);
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ 795);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertBySelector.js */ 569);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ 565);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ 216);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ 589);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../node_modules/css-loader/dist/cjs.js!./style.css */ 890);

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ 256:
/*!*******************************!*\
  !*** ./src/apis/tomtomapi.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TomTomAPI": () => (/* binding */ TomTomAPI),
/* harmony export */   "TomTomJsonParser": () => (/* binding */ TomTomJsonParser)
/* harmony export */ });
const TomTomAPI = (searchQuery) => {
  const API_KEY = "fcHahkaWpps5D8BvVWNrkXwb0ASMm9BT";
  const BASE_URL = "https://api.tomtom.com/search/2/search/";

  const makeUrl = () => {
    let URL = BASE_URL;
    URL += searchQuery.replaceAll(" ", "-");
    URL += ".json";
    URL += `?key=${API_KEY}`;
    return URL;
  };

  async function getData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json.results[0];
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }

  async function getPositionData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json.results[0].position;
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }

  async function getJsonData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json;
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }

  return { getData, getPositionData, getJsonData };
};

const TomTomJsonParser = (jsonObject) => {
  const municipality = jsonObject.address.municipality;
  const country = jsonObject.address.countrySubdivisionName;
  const position = jsonObject.position;
  return { municipality, country, position };
};

/*
TO USE:

  TomTomAPI(searchQuery)
    .getJsonData()
    .then((r) => {
      console.log(r);
      console.log(JsonToLocationObject(r));
      let locationModel = LocationModel(JsonToLocationObject(r));
      console.log("location model: ", locationModel);
      WeatherAPI(locationModel)
        .getWeatherData()
        .then((r) => {
          console.log(WeatherModel(r));
        });
    });
    */


/***/ }),

/***/ 962:
/*!********************************!*\
  !*** ./src/apis/weatherapi.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WeatherAPI": () => (/* binding */ WeatherAPI)
/* harmony export */ });
const WeatherAPI = (locationModel) => {
  const API_KEY = "f3c32091bf8f9865219ac12748616ead";
  let BASE_URL = " https://api.openweathermap.org/data/2.5/weather?";

  /*
  TO USE:
  Pass in WeatherAPI a LocationModel object 
  
  let locationData = await GeocodingAPI(locationInformation).getLocationData();
  let locationModel = LocationModel(locationData);
  let weatherData = await WeatherAPI(locationModel).getWeatherData();
  let weatherModel = WeatherModel(weatherData);

  */

  const makeUrl = () => {
    // https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}
    let URL = BASE_URL;
    URL += `lat=${locationModel.position.lat}&lon=${locationModel.position.lon}&appid=${API_KEY}`;
    //console.log(URL);
    return URL;
  };
  // Returns an object with the location data.
  async function getWeatherData() {
    try {
      let response = await fetch(makeUrl(), { mode: "cors" });
      let json = await response.json();
      return json;
    } catch (error) {
      console.log("Error from getLocationData: ", error);
    }
  }
  return { getWeatherData };
};


/***/ }),

/***/ 953:
/*!**************************************!*\
  !*** ./src/dom-models/searchform.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SearchForm": () => (/* binding */ SearchForm)
/* harmony export */ });
const SearchForm = () => {
  const SearchFormRow = () => {
    const div = document.createElement("div");
    let label = document.createElement("label");
    let input = document.createElement("input");
    label.textContent = "Search";
    div.appendChild(label);
    div.appendChild(input);
    return div;
  };
  const FormSubmitButton = () => {
    const button = document.createElement("button");
    button.type = "submit";
    button.textContent = "Search";
    return button;
  };
  let form = document.createElement("form");
  form.appendChild(SearchFormRow());
  form.appendChild(FormSubmitButton());
  return form;
};


/***/ }),

/***/ 551:
/*!**********************************************!*\
  !*** ./src/dom-models/weatherinformation.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WeatherInformation": () => (/* binding */ WeatherInformation)
/* harmony export */ });
const WeatherInformation = (weatherModel) => {
  const InfoPair = (label, value) => {
    const div = document.createElement("div");
    const labelP = document.createElement("p");
    const valueP = document.createElement("p");
    labelP.textContent = label;
    valueP.textContent = value;
    div.appendChild(labelP);
    div.appendChild(valueP);
    return div;
  };
  const div = document.createElement("div");
  div.appendChild(InfoPair("Feels Like", weatherModel.feelsLike));
  div.appendChild(InfoPair("Humidity", weatherModel.humidity));
  div.appendChild(InfoPair("Pressure", weatherModel.pressure));
  div.appendChild(InfoPair("Current Temperature", weatherModel.curTemp));
  div.appendChild(InfoPair("Minimum Temperature", weatherModel.minTemp));
  div.appendChild(InfoPair("Maximum Temperature", weatherModel.maxTemp));
  div.appendChild(InfoPair("Wind Speed", weatherModel.windSpeed));
  div.appendChild(InfoPair("Description", weatherModel.description));
  div.id = "weather-info-container";
  return div;
};


/***/ }),

/***/ 138:
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _models_weathermodel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./models/weathermodel */ 179);
/* harmony import */ var _apis_weatherapi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apis/weatherapi */ 962);
/* harmony import */ var _styles_style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/style.css */ 915);
/* harmony import */ var _apis_tomtomapi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./apis/tomtomapi */ 256);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash */ 486);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _dom_models_searchform__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dom-models/searchform */ 953);
/* harmony import */ var _dom_models_weatherinformation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dom-models/weatherinformation */ 551);










const TestWeatherModel = async () => {
  let tomtomdata = await (0,_apis_tomtomapi__WEBPACK_IMPORTED_MODULE_3__.TomTomAPI)("london").getData();
  console.log(tomtomdata);
  let tomtomlocatoin = (0,_apis_tomtomapi__WEBPACK_IMPORTED_MODULE_3__.TomTomJsonParser)(tomtomdata);
  console.log(tomtomlocatoin);
  let weatherData = await (0,_apis_weatherapi__WEBPACK_IMPORTED_MODULE_1__.WeatherAPI)(tomtomlocatoin).getWeatherData();
  let weatherModel = (0,_models_weathermodel__WEBPACK_IMPORTED_MODULE_0__.WeatherModel)(weatherData);
  return weatherModel;
};

const DomEventManager = () => {
  const form = document.querySelector("form");
  form.onsubmit = async (e) => {
    e.preventDefault();
    const value = document.querySelector("input").value;

    let tomtomdata = await (0,_apis_tomtomapi__WEBPACK_IMPORTED_MODULE_3__.TomTomAPI)(value).getData();
    let tomtomlocatoin = (0,_apis_tomtomapi__WEBPACK_IMPORTED_MODULE_3__.TomTomJsonParser)(tomtomdata);
    let weatherData = await (0,_apis_weatherapi__WEBPACK_IMPORTED_MODULE_1__.WeatherAPI)(tomtomlocatoin).getWeatherData();
    let weatherModel = (0,_models_weathermodel__WEBPACK_IMPORTED_MODULE_0__.WeatherModel)(weatherData);
    if (document.querySelector("#weather-info-container"))
      DomManager().resetWeatherInformation();
    document
      .querySelector("#root")
      .appendChild((0,_dom_models_weatherinformation__WEBPACK_IMPORTED_MODULE_6__.WeatherInformation)(weatherModel));
  };
};

const DomManager = () => {
  const initialLoad = () => {
    const rootDiv = document.createElement("div");
    rootDiv.id = "root";
    rootDiv.appendChild((0,_dom_models_searchform__WEBPACK_IMPORTED_MODULE_5__.SearchForm)());

    document.body.appendChild(rootDiv);
  };

  const resetWeatherInformation = () => {
    console.log("resetWeatherInformation");
    const weatherInfoDiv = document.querySelector("#weather-info-container");
    const rootDiv = document.querySelector("#root");
    console.log(rootDiv);
    rootDiv.removeChild(weatherInfoDiv);
    /*
    console.log("weatherInfoDivbefore", weatherInfoDiv);
    while (weatherInfoDiv.firstChild) {
      weatherInfoDiv.removeChild(weatherInfoDiv.firstChild);
    }
    console.log("weatherinfodiv after", weatherInfoDiv);
    */
  };

  const addWeatherInformation = () => {};

  return { initialLoad, resetWeatherInformation };
};

DomManager().initialLoad();
DomEventManager();


/***/ }),

/***/ 179:
/*!************************************!*\
  !*** ./src/models/weathermodel.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WeatherModel": () => (/* binding */ WeatherModel)
/* harmony export */ });
const WeatherModel = (weatherJson) => {
  let feelsLike = weatherJson ? weatherJson.main.feels_like : "";
  let humidity = weatherJson ? weatherJson.main.humidity : "";
  let pressure = weatherJson ? weatherJson.main.pressure : "";
  let curTemp = weatherJson ? weatherJson.main.temp : "";
  let minTemp = weatherJson ? weatherJson.main.temp_min : "";
  let maxTemp = weatherJson ? weatherJson.main.temp_max : "";
  let windSpeed = weatherJson ? weatherJson.wind.speed : "";
  let description = weatherJson ? weatherJson.weather[0].description : "";

  return {
    feelsLike, // this is in kelvin
    humidity,
    pressure,
    curTemp,
    minTemp,
    maxTemp,
    windSpeed,
    description,
  };
};


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__(138)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguNDBmN2JmYmZmODM1YWY4MmUwMzAuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDNkc7QUFDakI7QUFDNUYsOEJBQThCLG1GQUEyQixDQUFDLDRGQUFxQztBQUMvRjtBQUNBLGtEQUFrRCxlQUFlLEdBQUcsT0FBTyx1RkFBdUYsVUFBVSxpQ0FBaUMsZUFBZSxHQUFHLG1CQUFtQjtBQUNsUDtBQUNBLGlFQUFlLHVCQUF1QixFQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ052QyxNQUFrRztBQUNsRyxNQUF3RjtBQUN4RixNQUErRjtBQUMvRixNQUFrSDtBQUNsSCxNQUEyRztBQUMzRyxNQUEyRztBQUMzRyxNQUFzRztBQUN0RztBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhOztBQUVyQyx1QkFBdUIsdUdBQWE7QUFDcEM7QUFDQSxpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLHNGQUFPOzs7O0FBSWdEO0FBQ3hFLE9BQU8saUVBQWUsc0ZBQU8sSUFBSSw2RkFBYyxHQUFHLDZGQUFjLFlBQVksRUFBQzs7Ozs7Ozs7Ozs7Ozs7OztBQzFCdEU7QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQSxXQUFXO0FBQ1g7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDs7Ozs7Ozs7Ozs7Ozs7O0FDcEVPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsNERBQTRELElBQUksTUFBTSxJQUFJLFFBQVE7QUFDbEY7QUFDQSxrQkFBa0IsMkJBQTJCLE9BQU8sMkJBQTJCLFNBQVMsUUFBUTtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7Ozs7Ozs7Ozs7Ozs7O0FDakNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FDcEJPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJxRDtBQUNGO0FBQ0o7QUFDbkI7QUFDaUI7QUFDTztBQUNwQjtBQUNxQjtBQUNnQjs7QUFFckU7QUFDQSx5QkFBeUIsMERBQVM7QUFDbEM7QUFDQSx1QkFBdUIsaUVBQWdCO0FBQ3ZDO0FBQ0EsMEJBQTBCLDREQUFVO0FBQ3BDLHFCQUFxQixrRUFBWTtBQUNqQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkJBQTJCLDBEQUFTO0FBQ3BDLHlCQUF5QixpRUFBZ0I7QUFDekMsNEJBQTRCLDREQUFVO0FBQ3RDLHVCQUF1QixrRUFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrRkFBa0I7QUFDckM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrRUFBVTs7QUFFbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFdBQVc7QUFDWDs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUNwRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9zdHlsZXMvc3R5bGUuY3NzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3N0eWxlcy9zdHlsZS5jc3M/ZmY5NCIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9hcGlzL3RvbXRvbWFwaS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9hcGlzL3dlYXRoZXJhcGkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvZG9tLW1vZGVscy9zZWFyY2hmb3JtLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2RvbS1tb2RlbHMvd2VhdGhlcmluZm9ybWF0aW9uLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL21vZGVscy93ZWF0aGVybW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIuaGVsbG8ge1xcbiAgY29sb3I6IHJlZDtcXG59XCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3N0eWxlcy9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxVQUFVO0FBQ1pcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLmhlbGxvIHtcXG4gIGNvbG9yOiByZWQ7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJleHBvcnQgY29uc3QgVG9tVG9tQVBJID0gKHNlYXJjaFF1ZXJ5KSA9PiB7XG4gIGNvbnN0IEFQSV9LRVkgPSBcImZjSGFoa2FXcHBzNUQ4QnZWV05ya1h3YjBBU01tOUJUXCI7XG4gIGNvbnN0IEJBU0VfVVJMID0gXCJodHRwczovL2FwaS50b210b20uY29tL3NlYXJjaC8yL3NlYXJjaC9cIjtcblxuICBjb25zdCBtYWtlVXJsID0gKCkgPT4ge1xuICAgIGxldCBVUkwgPSBCQVNFX1VSTDtcbiAgICBVUkwgKz0gc2VhcmNoUXVlcnkucmVwbGFjZUFsbChcIiBcIiwgXCItXCIpO1xuICAgIFVSTCArPSBcIi5qc29uXCI7XG4gICAgVVJMICs9IGA/a2V5PSR7QVBJX0tFWX1gO1xuICAgIHJldHVybiBVUkw7XG4gIH07XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gobWFrZVVybCgpLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xuICAgICAgbGV0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4ganNvbi5yZXN1bHRzWzBdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0TG9jYXRpb25EYXRhOiBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFBvc2l0aW9uRGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gobWFrZVVybCgpLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xuICAgICAgbGV0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4ganNvbi5yZXN1bHRzWzBdLnBvc2l0aW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0TG9jYXRpb25EYXRhOiBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEpzb25EYXRhKCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChtYWtlVXJsKCksIHsgbW9kZTogXCJjb3JzXCIgfSk7XG4gICAgICBsZXQganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBqc29uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0TG9jYXRpb25EYXRhOiBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IGdldERhdGEsIGdldFBvc2l0aW9uRGF0YSwgZ2V0SnNvbkRhdGEgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBUb21Ub21Kc29uUGFyc2VyID0gKGpzb25PYmplY3QpID0+IHtcbiAgY29uc3QgbXVuaWNpcGFsaXR5ID0ganNvbk9iamVjdC5hZGRyZXNzLm11bmljaXBhbGl0eTtcbiAgY29uc3QgY291bnRyeSA9IGpzb25PYmplY3QuYWRkcmVzcy5jb3VudHJ5U3ViZGl2aXNpb25OYW1lO1xuICBjb25zdCBwb3NpdGlvbiA9IGpzb25PYmplY3QucG9zaXRpb247XG4gIHJldHVybiB7IG11bmljaXBhbGl0eSwgY291bnRyeSwgcG9zaXRpb24gfTtcbn07XG5cbi8qXG5UTyBVU0U6XG5cbiAgVG9tVG9tQVBJKHNlYXJjaFF1ZXJ5KVxuICAgIC5nZXRKc29uRGF0YSgpXG4gICAgLnRoZW4oKHIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHIpO1xuICAgICAgY29uc29sZS5sb2coSnNvblRvTG9jYXRpb25PYmplY3QocikpO1xuICAgICAgbGV0IGxvY2F0aW9uTW9kZWwgPSBMb2NhdGlvbk1vZGVsKEpzb25Ub0xvY2F0aW9uT2JqZWN0KHIpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwibG9jYXRpb24gbW9kZWw6IFwiLCBsb2NhdGlvbk1vZGVsKTtcbiAgICAgIFdlYXRoZXJBUEkobG9jYXRpb25Nb2RlbClcbiAgICAgICAgLmdldFdlYXRoZXJEYXRhKClcbiAgICAgICAgLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhXZWF0aGVyTW9kZWwocikpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAqL1xuIiwiZXhwb3J0IGNvbnN0IFdlYXRoZXJBUEkgPSAobG9jYXRpb25Nb2RlbCkgPT4ge1xuICBjb25zdCBBUElfS0VZID0gXCJmM2MzMjA5MWJmOGY5ODY1MjE5YWMxMjc0ODYxNmVhZFwiO1xuICBsZXQgQkFTRV9VUkwgPSBcIiBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9cIjtcblxuICAvKlxuICBUTyBVU0U6XG4gIFBhc3MgaW4gV2VhdGhlckFQSSBhIExvY2F0aW9uTW9kZWwgb2JqZWN0IFxuICBcbiAgbGV0IGxvY2F0aW9uRGF0YSA9IGF3YWl0IEdlb2NvZGluZ0FQSShsb2NhdGlvbkluZm9ybWF0aW9uKS5nZXRMb2NhdGlvbkRhdGEoKTtcbiAgbGV0IGxvY2F0aW9uTW9kZWwgPSBMb2NhdGlvbk1vZGVsKGxvY2F0aW9uRGF0YSk7XG4gIGxldCB3ZWF0aGVyRGF0YSA9IGF3YWl0IFdlYXRoZXJBUEkobG9jYXRpb25Nb2RlbCkuZ2V0V2VhdGhlckRhdGEoKTtcbiAgbGV0IHdlYXRoZXJNb2RlbCA9IFdlYXRoZXJNb2RlbCh3ZWF0aGVyRGF0YSk7XG5cbiAgKi9cblxuICBjb25zdCBtYWtlVXJsID0gKCkgPT4ge1xuICAgIC8vIGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP2xhdD17bGF0fSZsb249e2xvbn0mYXBwaWQ9e0FQSSBrZXl9XG4gICAgbGV0IFVSTCA9IEJBU0VfVVJMO1xuICAgIFVSTCArPSBgbGF0PSR7bG9jYXRpb25Nb2RlbC5wb3NpdGlvbi5sYXR9Jmxvbj0ke2xvY2F0aW9uTW9kZWwucG9zaXRpb24ubG9ufSZhcHBpZD0ke0FQSV9LRVl9YDtcbiAgICAvL2NvbnNvbGUubG9nKFVSTCk7XG4gICAgcmV0dXJuIFVSTDtcbiAgfTtcbiAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgbG9jYXRpb24gZGF0YS5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0V2VhdGhlckRhdGEoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKG1ha2VVcmwoKSwgeyBtb2RlOiBcImNvcnNcIiB9KTtcbiAgICAgIGxldCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGpzb247XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZnJvbSBnZXRMb2NhdGlvbkRhdGE6IFwiLCBlcnJvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGdldFdlYXRoZXJEYXRhIH07XG59O1xuIiwiZXhwb3J0IGNvbnN0IFNlYXJjaEZvcm0gPSAoKSA9PiB7XG4gIGNvbnN0IFNlYXJjaEZvcm1Sb3cgPSAoKSA9PiB7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsZXQgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGxhYmVsLnRleHRDb250ZW50ID0gXCJTZWFyY2hcIjtcbiAgICBkaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcbiAgY29uc3QgRm9ybVN1Ym1pdEJ1dHRvbiA9ICgpID0+IHtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJ1dHRvbi50eXBlID0gXCJzdWJtaXRcIjtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNlYXJjaFwiO1xuICAgIHJldHVybiBidXR0b247XG4gIH07XG4gIGxldCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoU2VhcmNoRm9ybVJvdygpKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChGb3JtU3VibWl0QnV0dG9uKCkpO1xuICByZXR1cm4gZm9ybTtcbn07XG4iLCJleHBvcnQgY29uc3QgV2VhdGhlckluZm9ybWF0aW9uID0gKHdlYXRoZXJNb2RlbCkgPT4ge1xuICBjb25zdCBJbmZvUGFpciA9IChsYWJlbCwgdmFsdWUpID0+IHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IGxhYmVsUCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IHZhbHVlUCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGxhYmVsUC50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgIHZhbHVlUC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgIGRpdi5hcHBlbmRDaGlsZChsYWJlbFApO1xuICAgIGRpdi5hcHBlbmRDaGlsZCh2YWx1ZVApO1xuICAgIHJldHVybiBkaXY7XG4gIH07XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5hcHBlbmRDaGlsZChJbmZvUGFpcihcIkZlZWxzIExpa2VcIiwgd2VhdGhlck1vZGVsLmZlZWxzTGlrZSkpO1xuICBkaXYuYXBwZW5kQ2hpbGQoSW5mb1BhaXIoXCJIdW1pZGl0eVwiLCB3ZWF0aGVyTW9kZWwuaHVtaWRpdHkpKTtcbiAgZGl2LmFwcGVuZENoaWxkKEluZm9QYWlyKFwiUHJlc3N1cmVcIiwgd2VhdGhlck1vZGVsLnByZXNzdXJlKSk7XG4gIGRpdi5hcHBlbmRDaGlsZChJbmZvUGFpcihcIkN1cnJlbnQgVGVtcGVyYXR1cmVcIiwgd2VhdGhlck1vZGVsLmN1clRlbXApKTtcbiAgZGl2LmFwcGVuZENoaWxkKEluZm9QYWlyKFwiTWluaW11bSBUZW1wZXJhdHVyZVwiLCB3ZWF0aGVyTW9kZWwubWluVGVtcCkpO1xuICBkaXYuYXBwZW5kQ2hpbGQoSW5mb1BhaXIoXCJNYXhpbXVtIFRlbXBlcmF0dXJlXCIsIHdlYXRoZXJNb2RlbC5tYXhUZW1wKSk7XG4gIGRpdi5hcHBlbmRDaGlsZChJbmZvUGFpcihcIldpbmQgU3BlZWRcIiwgd2VhdGhlck1vZGVsLndpbmRTcGVlZCkpO1xuICBkaXYuYXBwZW5kQ2hpbGQoSW5mb1BhaXIoXCJEZXNjcmlwdGlvblwiLCB3ZWF0aGVyTW9kZWwuZGVzY3JpcHRpb24pKTtcbiAgZGl2LmlkID0gXCJ3ZWF0aGVyLWluZm8tY29udGFpbmVyXCI7XG4gIHJldHVybiBkaXY7XG59O1xuIiwiaW1wb3J0IHsgV2VhdGhlck1vZGVsIH0gZnJvbSBcIi4vbW9kZWxzL3dlYXRoZXJtb2RlbFwiO1xuaW1wb3J0IHsgd2VhdGhlckFQSXRlc3QgfSBmcm9tIFwiLi9hcGlzL3dlYXRoZXJhcGlcIjtcbmltcG9ydCB7IFdlYXRoZXJBUEkgfSBmcm9tIFwiLi9hcGlzL3dlYXRoZXJhcGlcIjtcbmltcG9ydCBcIi4vc3R5bGVzL3N0eWxlLmNzc1wiO1xuaW1wb3J0IHsgVG9tVG9tQVBJIH0gZnJvbSBcIi4vYXBpcy90b210b21hcGlcIjtcbmltcG9ydCB7IFRvbVRvbUpzb25QYXJzZXIgfSBmcm9tIFwiLi9hcGlzL3RvbXRvbWFwaVwiO1xuaW1wb3J0IHsgZGl2aWRlIH0gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgU2VhcmNoRm9ybSB9IGZyb20gXCIuL2RvbS1tb2RlbHMvc2VhcmNoZm9ybVwiO1xuaW1wb3J0IHsgV2VhdGhlckluZm9ybWF0aW9uIH0gZnJvbSBcIi4vZG9tLW1vZGVscy93ZWF0aGVyaW5mb3JtYXRpb25cIjtcblxuY29uc3QgVGVzdFdlYXRoZXJNb2RlbCA9IGFzeW5jICgpID0+IHtcbiAgbGV0IHRvbXRvbWRhdGEgPSBhd2FpdCBUb21Ub21BUEkoXCJsb25kb25cIikuZ2V0RGF0YSgpO1xuICBjb25zb2xlLmxvZyh0b210b21kYXRhKTtcbiAgbGV0IHRvbXRvbWxvY2F0b2luID0gVG9tVG9tSnNvblBhcnNlcih0b210b21kYXRhKTtcbiAgY29uc29sZS5sb2codG9tdG9tbG9jYXRvaW4pO1xuICBsZXQgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyQVBJKHRvbXRvbWxvY2F0b2luKS5nZXRXZWF0aGVyRGF0YSgpO1xuICBsZXQgd2VhdGhlck1vZGVsID0gV2VhdGhlck1vZGVsKHdlYXRoZXJEYXRhKTtcbiAgcmV0dXJuIHdlYXRoZXJNb2RlbDtcbn07XG5cbmNvbnN0IERvbUV2ZW50TWFuYWdlciA9ICgpID0+IHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICBmb3JtLm9uc3VibWl0ID0gYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikudmFsdWU7XG5cbiAgICBsZXQgdG9tdG9tZGF0YSA9IGF3YWl0IFRvbVRvbUFQSSh2YWx1ZSkuZ2V0RGF0YSgpO1xuICAgIGxldCB0b210b21sb2NhdG9pbiA9IFRvbVRvbUpzb25QYXJzZXIodG9tdG9tZGF0YSk7XG4gICAgbGV0IHdlYXRoZXJEYXRhID0gYXdhaXQgV2VhdGhlckFQSSh0b210b21sb2NhdG9pbikuZ2V0V2VhdGhlckRhdGEoKTtcbiAgICBsZXQgd2VhdGhlck1vZGVsID0gV2VhdGhlck1vZGVsKHdlYXRoZXJEYXRhKTtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3ZWF0aGVyLWluZm8tY29udGFpbmVyXCIpKVxuICAgICAgRG9tTWFuYWdlcigpLnJlc2V0V2VhdGhlckluZm9ybWF0aW9uKCk7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI3Jvb3RcIilcbiAgICAgIC5hcHBlbmRDaGlsZChXZWF0aGVySW5mb3JtYXRpb24od2VhdGhlck1vZGVsKSk7XG4gIH07XG59O1xuXG5jb25zdCBEb21NYW5hZ2VyID0gKCkgPT4ge1xuICBjb25zdCBpbml0aWFsTG9hZCA9ICgpID0+IHtcbiAgICBjb25zdCByb290RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICByb290RGl2LmlkID0gXCJyb290XCI7XG4gICAgcm9vdERpdi5hcHBlbmRDaGlsZChTZWFyY2hGb3JtKCkpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyb290RGl2KTtcbiAgfTtcblxuICBjb25zdCByZXNldFdlYXRoZXJJbmZvcm1hdGlvbiA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcInJlc2V0V2VhdGhlckluZm9ybWF0aW9uXCIpO1xuICAgIGNvbnN0IHdlYXRoZXJJbmZvRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3ZWF0aGVyLWluZm8tY29udGFpbmVyXCIpO1xuICAgIGNvbnN0IHJvb3REaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Jvb3RcIik7XG4gICAgY29uc29sZS5sb2cocm9vdERpdik7XG4gICAgcm9vdERpdi5yZW1vdmVDaGlsZCh3ZWF0aGVySW5mb0Rpdik7XG4gICAgLypcbiAgICBjb25zb2xlLmxvZyhcIndlYXRoZXJJbmZvRGl2YmVmb3JlXCIsIHdlYXRoZXJJbmZvRGl2KTtcbiAgICB3aGlsZSAod2VhdGhlckluZm9EaXYuZmlyc3RDaGlsZCkge1xuICAgICAgd2VhdGhlckluZm9EaXYucmVtb3ZlQ2hpbGQod2VhdGhlckluZm9EaXYuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwid2VhdGhlcmluZm9kaXYgYWZ0ZXJcIiwgd2VhdGhlckluZm9EaXYpO1xuICAgICovXG4gIH07XG5cbiAgY29uc3QgYWRkV2VhdGhlckluZm9ybWF0aW9uID0gKCkgPT4ge307XG5cbiAgcmV0dXJuIHsgaW5pdGlhbExvYWQsIHJlc2V0V2VhdGhlckluZm9ybWF0aW9uIH07XG59O1xuXG5Eb21NYW5hZ2VyKCkuaW5pdGlhbExvYWQoKTtcbkRvbUV2ZW50TWFuYWdlcigpO1xuIiwiZXhwb3J0IGNvbnN0IFdlYXRoZXJNb2RlbCA9ICh3ZWF0aGVySnNvbikgPT4ge1xuICBsZXQgZmVlbHNMaWtlID0gd2VhdGhlckpzb24gPyB3ZWF0aGVySnNvbi5tYWluLmZlZWxzX2xpa2UgOiBcIlwiO1xuICBsZXQgaHVtaWRpdHkgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLm1haW4uaHVtaWRpdHkgOiBcIlwiO1xuICBsZXQgcHJlc3N1cmUgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLm1haW4ucHJlc3N1cmUgOiBcIlwiO1xuICBsZXQgY3VyVGVtcCA9IHdlYXRoZXJKc29uID8gd2VhdGhlckpzb24ubWFpbi50ZW1wIDogXCJcIjtcbiAgbGV0IG1pblRlbXAgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLm1haW4udGVtcF9taW4gOiBcIlwiO1xuICBsZXQgbWF4VGVtcCA9IHdlYXRoZXJKc29uID8gd2VhdGhlckpzb24ubWFpbi50ZW1wX21heCA6IFwiXCI7XG4gIGxldCB3aW5kU3BlZWQgPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLndpbmQuc3BlZWQgOiBcIlwiO1xuICBsZXQgZGVzY3JpcHRpb24gPSB3ZWF0aGVySnNvbiA/IHdlYXRoZXJKc29uLndlYXRoZXJbMF0uZGVzY3JpcHRpb24gOiBcIlwiO1xuXG4gIHJldHVybiB7XG4gICAgZmVlbHNMaWtlLCAvLyB0aGlzIGlzIGluIGtlbHZpblxuICAgIGh1bWlkaXR5LFxuICAgIHByZXNzdXJlLFxuICAgIGN1clRlbXAsXG4gICAgbWluVGVtcCxcbiAgICBtYXhUZW1wLFxuICAgIHdpbmRTcGVlZCxcbiAgICBkZXNjcmlwdGlvbixcbiAgfTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=